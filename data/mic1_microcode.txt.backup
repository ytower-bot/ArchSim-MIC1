# ============================================================================
# MIC-1 MICROPROGRAMA COMPLETO - FASE 6B
# ============================================================================
# Generated microcode with correct bit encoding
# Bit layout: [AMUX|COND|ALU|SH|MBR|MAR|RD|WR|ENC|C|B|A|ADDR]
#
# Registers: 0=PC, 1=AC, 2=IR, 3=TIR, 4=SP, 5=AMASK, 6=SMASK,
#            7=R0(0), 8=R1(+1), 9=Rm1(-1)
# ============================================================================

# ============================================================================
# FETCH CYCLE (0x00-0x03) - Common instruction fetch
# ============================================================================

# 0x00: MAR ← PC
#       B=PC, ALU=A (pass B through), MAR=1, ADDR=0x01
00010000100000000000000000000001

# 0x01: IR ← MBR (from memory read), PC ← PC + 1
#       RD=1 (triggers memory read), A=PC, B=R1(+1), ALU=ADD, ENC=1, C=PC, ADDR=0x02
00000000010100001000000000000010

# 0x02: Wait for memory, latch MBR into IR
#       AMUX=1 (select MBR), ALU=A (pass through), ENC=1, C=IR, ADDR=0x03
10010000000100100000000000000011

# 0x03: Dispatch to instruction (using IR as address)
#       A=IR, ALU=A, COND=ALWAYS, ADDR=0x00 (will be overridden by IR value)
#       NOTE: This is simplified - real dispatch would use TIR
01110000000000000000001000000000

# ============================================================================
# LODD (0x10-0x12): AC ← Memory[IR[7:0]]
# ============================================================================

00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000

# 0x10: MAR ← IR (lower 8 bits contain address)
#       A=IR, ALU=A, MAR=1, ADDR=0x11
00010000100000000000001000010001

# 0x11: Read Memory[MAR] into MBR
#       RD=1, ADDR=0x12
00000000010000000000000000010010

# 0x12: AC ← MBR
#       AMUX=1 (select MBR), ALU=A, ENC=1, C=AC, ADDR=0x00 (back to fetch)
10010000000100010000000000000000

00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000

# ============================================================================
# STOD (0x20-0x22): Memory[IR[7:0]] ← AC
# ============================================================================

# 0x20: MAR ← IR
#       A=IR, ALU=A, MAR=1, ADDR=0x21
00010000100000000000001000100001

# 0x21: MBR ← AC
#       A=AC, ALU=A, MBR=1, ADDR=0x22
00010001000000000000000100100010

# 0x22: Memory[MAR] ← MBR
#       WR=1, ADDR=0x00 (back to fetch)
00000000001000000000000000000000

00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000

# ============================================================================
# ADDD (0x30-0x32): AC ← AC + Memory[IR[7:0]]
# ============================================================================

# 0x30: MAR ← IR
#       A=IR, ALU=A, MAR=1, ADDR=0x31
00010000100000000000001000110001

# 0x31: Read Memory[MAR]
#       RD=1, ADDR=0x32
00000000010000000000000000110010

# 0x32: AC ← AC + MBR
#       AMUX=1 (MBR), A=AC, ALU=ADD, ENC=1, C=AC, ADDR=0x00
10000000000100010000000100000000

00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000

# ============================================================================
# LOCO (0x90): AC ← IR[7:0] (load constant)
# ============================================================================

# 0x90: AC ← IR (lower 8 bits)
#       A=IR, ALU=A, ENC=1, C=AC, ADDR=0x00
00010000000100010000001000000000

00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000

# ============================================================================
# JUMP (0xE0): PC ← IR[7:0]
# ============================================================================

# 0xE0: PC ← IR
#       A=IR, ALU=A, ENC=1, C=PC, ADDR=0x00
00010000000100000000001000000000

00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000

# ============================================================================
# HALT (0xF0-0xFF): Infinite loop
# ============================================================================

# 0xF0: HALT (jump to self)
#       COND=ALWAYS, ADDR=0xF0
01100000000000000000000011110000

01100000000000000000000011110000
01100000000000000000000011110000
01100000000000000000000011110000
01100000000000000000000011110000
01100000000000000000000011110000
01100000000000000000000011110000
01100000000000000000000011110000
01100000000000000000000011110000
01100000000000000000000011110000
01100000000000000000000011110000
01100000000000000000000011110000
01100000000000000000000011110000
01100000000000000000000011110000
01100000000000000000000011110000
01100000000000000000000011110000

# ============================================================================
# END OF MICROPROGRAMA (256 entries)
# ============================================================================
